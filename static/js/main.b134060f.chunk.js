(this["webpackJsonpthree-spatial-controls-example"]=this["webpackJsonpthree-spatial-controls-example"]||[]).push([[0],{27:function(e,t,n){e.exports=n(40)},28:function(e,t,n){},33:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);n(28);var r=n(12),a=n.n(r),o=n(21),i=n.n(o),s=(n(33),n(6)),d=n(22),l=n(26),c=n(11);function p(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"xzy";n=n||new s.i("white"),e=e||10,t=t||100,r=r||8e3;var o=a.substr(0,2),i=new s.Y(2,2,1,1),d=new s.rb({side:s.n,uniforms:{uSize1:{value:e},uSize2:{value:t},uColor:{value:n},uDistance:{value:r}},transparent:!0,vertexShader:"\n           \n           varying vec3 worldPosition;\n\t\t   \n           uniform float uDistance;\n           \n           void main() {\n           \n                vec3 pos = position.".concat(a," * uDistance;\n                pos.").concat(o," += cameraPosition.").concat(o,";\n                \n                worldPosition = pos;\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n           \n           }\n           "),fragmentShader:"\n           \n           varying vec3 worldPosition;\n           \n           uniform float uSize1;\n           uniform float uSize2;\n           uniform vec3 uColor;\n           uniform float uDistance;\n            \n            \n            \n            float getGrid(float size) {\n            \n                vec2 r = worldPosition.".concat(o," / size;\n                \n                \n                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n                float line = min(grid.x, grid.y);\n                \n            \n                return 1.0 - min(line, 1.0);\n            }\n            \n           void main() {\n           \n                \n                  float d = 1.0 - min(distance(cameraPosition.").concat(o,", worldPosition.").concat(o,") / uDistance, 1.0);\n                \n                  float g1 = getGrid(uSize1);\n                  float g2 = getGrid(uSize2);\n                  \n                  \n                  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n                \n                  if ( gl_FragColor.a <= 0.0 ) discard;\n                \n           \n           }\n           \n           "),extensions:{derivatives:!0}}),l=new s.M(i,d);return l.frustumCulled=!1,l}function u(e){var t=(new s.l).setPath("textures/cube/MilkyWay/").load(["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]);e.background=t;var n=new p(10,100);e.add(n),function(e){var t=new s.a(4210752);e.add(t);var n=new s.m(16777215,.5);e.add(n);var r=new s.s(16772785,526368,4);e.add(r);var a=new s.wb(16755036,4);a.position.set(-50,350,50),a.castShadow=!0}(e)}p.prototype=Object(c.a)(Object(c.a)(Object(c.a)({},s.M.prototype),s.V.prototype),s.o.prototype);var h=n(18),w=n(25),f=n(23),v=n(24);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=(new h.a).setDRACOLoader((new f.a).setDecoderPath("assets/wasm/")).setKTX2Loader((new w.a).setTranscoderPath("assets/wasm/")).setMeshoptDecoder(v.a);r.load(e,(function(e){var r=e.scene||e.scenes[0];if(!r)throw new Error("This model contains no scene, and cannot be viewed here. However, it may contain individual 3D resources.");t.add(r),n(r)}))}var _=n(9);function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x=new _.l,H=new _.g,P=new _.n(0,0,0),S=new _.n(0,1,0),j=new _.n,k=new _.n,z=new _.n,R=new _.n,M=new _.n,L=new _.n,C=/OculusBrowser/.test(navigator.userAgent);var E,A,F,O,V=new _.i({depthTest:!1,depthWrite:!1,transparent:!0,side:_.b,fog:!1,toneMapped:!1}),D=function(e){var t,n;function r(t,n,r,a,o,i){var s;void 0===i&&(i=!0),(s=e.call(this)||this)._xr=t.xr,s._cameraRig=n,s._hander=i?"right":"left",s._playerHand=new _.k,s._playerHand.position.set(0,.05,0),s._destHand=new _.k,s._destHand.position.set(0,.05,0),s._playerHandPos=new _.n,s._destHandPos=new _.n,s._destMarker=o,s._tmpVector=new _.n,s._resultVector=new _.n,s._multiplyScalar=3,s._helperLine=new _.f(function(){var e=new _.a;return e.setAttribute("position",new _.d([0,0,0,1,1,1],3)),e}(),V),s._helperLine2=s._helperLine.clone(),s._cameraRig.parent.add(s._helperLine),s._cameraRig.parent.add(s._helperLine2);var d=function(){s.teleport()},l=function(){s._multiplyScalar*=.5},c=function(){s._multiplyScalar*=2};return r.addEventListener("selectend",d),a.addEventListener("selectend",d),i?(r.add(s._destHand),a.add(s._playerHand)):(r.add(s._playerHand),a.add(s._destHand)),i===!C?(r.add(s._destHand),a.add(s._playerHand),r.addEventListener("squeezestart",c),a.addEventListener("squeezestart",l)):(r.add(s._playerHand),a.add(s._destHand),r.addEventListener("squeezestart",l),a.addEventListener("squeezestart",c)),(new _.e).load("fonts/helvetiker_regular.typeface.json",(function(e){var t=new _.m("From",{font:e,size:.05,height:.05});s._playerHand.add(new _.h(t,new _.j));var n=new _.m("To",{font:e,size:.05,height:.05});s._destHand.add(new _.h(n,new _.j))})),H.lookAt(P,new _.n(0,0,1),S),x.setFromRotationMatrix(H),s._destMarker.setRotationFromQuaternion(x),s}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=r.prototype;return a.update=function(){this._playerHand.getWorldPosition(this._playerHandPos),this._destHand.getWorldPosition(this._destHandPos),this._tmpVector.subVectors(this._destHandPos,this._playerHandPos),this._tmpVector.multiplyScalar(this._multiplyScalar),this._destMarker.position.copy(this._tmpVector.add(this._cameraRig.position)),this._helperLine.position.copy(this._playerHandPos),L.set(1e-10,1e-10,1e-10).add(this._destHandPos).sub(this._playerHandPos),this._helperLine.scale.copy(L),this._helperLine2.position.copy(this._cameraRig.position),L.set(1e-10,1e-10,1e-10).add(this._cameraRig.position).sub(this._destMarker.position).multiplyScalar(-1),this._helperLine2.scale.copy(L);var e=this._xr.getSession();if(e)for(var t,n=b(e.inputSources);!(t=n()).done;){var r=t.value;if(r.gamepad&&(r&&r.gamepad&&(r.gamepad.axes[2]||r.gamepad.axes[3])&&r.handedness==this._hander)){var a=r.gamepad.axes;this._destHand.getWorldDirection(j),k.set(j.x,0,j.z),z.copy(k),z.applyAxisAngle(S,Math.PI/2),k.multiplyScalar(-a[3]),z.multiplyScalar(-a[2]),R.addVectors(k,z),R.normalize(),H.lookAt(P,R,S),x.setFromRotationMatrix(H),this._destMarker.setRotationFromQuaternion(x)}}},a.teleport=function(){this._resultVector=this._tmpVector.subVectors(this._destHandPos,this._playerHandPos),this._cameraRig.position.add(this._resultVector.multiplyScalar(this._multiplyScalar)),this._destMarker.getWorldDirection(M),H.lookAt(P,M,S),x.setFromRotationMatrix(H),this._cameraRig.setRotationFromQuaternion(x)},r}(_.c);function W(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)();function o(){O.update(),F.render(E,A)}return Object(r.useEffect)((function(){!function(){u(E=new s.qb),A=new s.X(75,window.innerWidth/window.innerHeight,.1,1e4),(F=new s.Fb({antialias:!0,canvas:t.current})).xr.enabled=!0,F.setPixelRatio(window.devicePixelRatio),F.setSize(window.innerWidth,window.innerHeight),F.xr.setFramebufferScaleFactor(2),F.setAnimationLoop(o),n.current.appendChild(d.a.createButton(F)),window.addEventListener("resize",(function(){return function(e,t){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(window.devicePixelRatio)}(A,F)}));var e=new s.r;e.position.set(0,0,5),e.add(A),E.add(e);var r=F.xr.getController(0);e.add(r);var a=F.xr.getController(1);e.add(a);var i=new l.a,c=F.xr.getControllerGrip(0);c.add(i.createControllerModel(c)),e.add(c);var p=F.xr.getControllerGrip(1);p.add(i.createControllerModel(p)),e.add(p);var h=new s.r;E.add(h),m("model/opaDuck.gltf",h),m("model/house.gltf",E,(function(e){e.scale.set(15,15,15),e.position.set(0,0,-10)})),O=new D(F,e,r,a,h,!0)}()}),[]),a.a.createElement("div",{style:{height:"100vh",overflowX:"hidden",overflowY:"hidden"},ref:e},a.a.createElement("canvas",{ref:t}),a.a.createElement("div",{ref:n}))}var T=function(){return a.a.createElement(W,null)};i.a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b134060f.chunk.js.map